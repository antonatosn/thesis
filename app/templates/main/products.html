{% extends 'base.html' %}

{% block title %}Insurance Products - SafeDrive Insurance{% endblock %}

{% block content %}
  <div class="row">
    <div class="col-md-12">
      <h1 class="display-5 mb-4">Our Insurance Products</h1>
      <p class="lead mb-5">Choose the coverage that best fits your needs and budget.</p>
      
      <div class="row g-4">
        {% for product in products %}
          <div class="col-md-6">
            <div class="card h-100 shadow-sm {% if product.coverage_type == 'premium' %}border-primary{% endif %}">
              {% if product.coverage_type == 'premium' %}
                <div class="card-header bg-primary text-white">
                  <span class="badge bg-white text-primary float-end">RECOMMENDED</span>
                  <h4 class="mb-0">{{ product.name }}</h4>
                </div>
              {% else %}
                <div class="card-header">
                  <h4 class="mb-0">{{ product.name }}</h4>
                </div>
              {% endif %}
              
              <div class="card-body">
                <p class="card-text">{{ product.description }}</p>
                
                <h5 class="mb-3">Coverage Features:</h5>
                <ul class="list-group list-group-flush mb-4">
                  {% for feature in product.features.split(', ') %}
                    <li class="list-group-item bg-transparent">
                      <i class="fas fa-check-circle text-success me-2"></i> {{ feature }}
                    </li>
                  {% endfor %}
                </ul>
                
                <p class="h3 mb-3 text-center">${{ product.base_price }}/year</p>
                <p class="text-muted small text-center mb-4">Base price before vehicle adjustments</p>
                
                <div class="d-grid">
                  {% if g.user %}
                    <a href="{{ url_for('main.add_car') }}" class="btn btn-primary">
                      <i class="fas fa-calculator me-2"></i> Calculate Your Rate
                    </a>
                  {% else %}
                    <a href="{{ url_for('auth.register') }}" class="btn btn-primary">
                      <i class="fas fa-user-plus me-2"></i> Sign Up for Quote
                    </a>
                  {% endif %}
                </div>
              </div>
            </div>
          </div>
        {% endfor %}
      </div>
    </div>
  </div>
  
  <div class="row mt-5">
    <div class="col-md-8 offset-md-2">
      <div class="card bg-light">
        <div class="card-body p-4">
          <h3 class="mb-3">Frequently Asked Questions</h3>
          
          <div class="accordion" id="faqAccordion">
            <div class="accordion-item">
              <h2 class="accordion-header">
                <button class="accordion-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#faq1">
                  How is my No Claims Bonus (NCB) affected?
                </button>
              </h2>
              <div id="faq1" class="accordion-collapse collapse" data-bs-parent="#faqAccordion">
                <div class="accordion-body">
                  In Ireland, your No Claims Bonus (NCB) is a valuable discount that can reduce your premium by up to 50% after 5 claim-free years. Our Step-Back protection allows you to retain part of your NCB even after a claim, while our Full NCB protection preserves your entire bonus. If you switch to us, we'll honor your existing NCB with proof from your previous insurer.
                </div>
              </div>
            </div>
            
            <div class="accordion-item">
              <h2 class="accordion-header">
                <button class="accordion-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#faq2">
                  What is the difference between Comprehensive and Third Party, Fire & Theft?
                </button>
              </h2>
              <div id="faq2" class="accordion-collapse collapse" data-bs-parent="#faqAccordion">
                <div class="accordion-body">
                  Comprehensive insurance covers damage to your own vehicle from accidents (even if you're at fault), as well as fire, theft, and third-party damages. Third Party, Fire & Theft covers damage to other vehicles and property plus your own vehicle if it's stolen or damaged by fire, but not damage to your vehicle from an accident. For full protection on Irish roads, we recommend our Comprehensive cover.
                </div>
              </div>
            </div>
            
            <div class="accordion-item">
              <h2 class="accordion-header">
                <button class="accordion-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#faq3">
                  Do you offer cover for driving in Northern Ireland and the UK?
                </button>
              </h2>
              <div id="faq3" class="accordion-collapse collapse" data-bs-parent="#faqAccordion">
                <div class="accordion-body">
                  Yes, all our policies include standard coverage for driving in Northern Ireland, the UK, and throughout the EU. This means you're protected when traveling across the border or taking your vehicle on holidays to the continent. For longer stays abroad, please contact our customer service team to ensure you have adequate coverage.
                </div>
              </div>
            </div>
            
            <div class="accordion-item">
              <h2 class="accordion-header">
                <button class="accordion-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#faq4">
                  How does the penalty points system affect my premium?
                </button>
              </h2>
              <div id="faq4" class="accordion-collapse collapse" data-bs-parent="#faqAccordion">
                <div class="accordion-body">
                  In Ireland, penalty points on your licence can impact your insurance premium. Generally, 1-3 points may have a minimal effect, while 4-7 points could increase your premium significantly. With 8 or more points, you may face substantial increases or difficulty finding coverage. Our pricing algorithm takes into account your full driving history to provide the fairest rate possible.
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
{% endblock %}
